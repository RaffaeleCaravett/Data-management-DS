<div class="container">
  <div class="row">
    <div class="col-md-12 p-0 m-0">
      <button class="btn btn-secondary mb-1" (click)="goContratti()"><mat-icon
          class="pt-1">description</mat-icon>Nuovo</button>
    </div>
  </div>
  <div class="row">

    <div class="col-xs-12 col-md-3 border bg-white p-3">
      <div class="row">
        <form class="w-100" [formGroup]="formContratto" (ngSubmit)="onSubmit()">
          <div class="col-md-12"><label for="cdContratto">Codice Contratto :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <input type="search" formControlName="cdContratto" class="form-control">
              </div>
              <div class="col-md-2" *ngIf="formContratto.controls['cdContratto'].value">
              </div>
            </div>
          </div>
          <div class="col-md-12 mt-1"><label for="ragioneSociale">Ragione Sociale :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <input type="search" formControlName="ragioneSociale" class="form-control">
              </div>
              <div class="col-md-2">
              </div>
            </div>
          </div>
          <div class="col-md-12"><label for="cdFiscale">Codice Fiscale :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <input type="search" formControlName="cdFiscale" class="form-control">
              </div>
              <div class="col-md-2">
              </div>
            </div>
          </div>
          <div class="col-md-12"><label for="partitaIva">Partita Iva :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <input type="search" formControlName="partitaIva" class="form-control">
              </div>
              <div class="col-md-2">
              </div>
            </div>
          </div>
          <div class="col-md-12"><label for="tipoCliente">Tipo Cliente :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <select type="text" formControlName="tipoCliente" class="form-select">
                  <option value=""></option>
                  <option *ngFor="let element of optionsArray" value="{{element.cdTipoCliente}}">
                    {{element.dsTipoCliente}}</option>
                </select>
              </div>
              <div class="col-md-2">
              </div>
            </div>
          </div>
          <div class="col-md-12"><label for="statoContratto">Stato Contratto :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <select type="text" formControlName="statoContratto" class="form-select">
                  <option value=""></option>
                  <option value="{{c.id}}" *ngFor="let c of statiContratto">
                    {{c.descrizione}}
                  </option>
                </select>
              </div>
              <div class="col-md-2">
              </div>
            </div>
          </div>
          <div class="col-md-12"><label for="dataStipulaDa">Data Stipula Da :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <input type="date" formControlName="dataStipulaDa" class="form-control">
              </div>
              <div class="col-md-2">
              </div>
            </div>
          </div>
          <div class="col-md-12"><label for="dataStipulaA">Data Stipula A :</label></div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-10">
                <input type="date" formControlName="dataStipulaA" class="form-control">
              </div>
              <div class="col-md-2"></div>
            </div>
          </div>

          <div class="row pt-3 text-center">
            <div class="col-md-6 p-1">
              <button class="btn btn-danger" (click)="annulla()">
                <i class="fas fa-times p-2"></i>Annulla
              </button>
            </div>
            <div class="col-md-6 p-1">
              <button type="submit" class="btn btn-primary">
                <i class="fa fa-search p-2"></i>Cerca
              </button>
            </div>
          </div>

        </form>
      </div>
    </div>
    <div class="border bg-white col-xs-12 col-md-9 overflow-auto">

      <div class="pt-3">
        <table mat-table [dataSource]="dataSource" class="m-auto">

          <ng-container matColumnDef="Codice Contratto">
            <th mat-header-cell *matHeaderCellDef> Codice Contratto </th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.cdContratto}} </td>
          </ng-container>

          <ng-container matColumnDef="Tipo Fornitura">
            <th mat-header-cell *matHeaderCellDef> Tipo Fornitura</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.tipoFornitura}} </td>
          </ng-container>

          <ng-container matColumnDef="Data Stipula">
            <th mat-header-cell *matHeaderCellDef> Data Stipula</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.dataStipula | date:'dd/MM/YYYY'}} </td>
          </ng-container>

          <ng-container matColumnDef="Tipo Cliente">
            <th mat-header-cell *matHeaderCellDef> Tipo Cliente</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.tipoCliente}} </td>
          </ng-container>

          <ng-container matColumnDef="Ragione Sociale">
            <th mat-header-cell *matHeaderCellDef> Ragione Sociale</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.ragioneSociale}} </td>
          </ng-container>
          <ng-container matColumnDef="Codice Fiscale">
            <th mat-header-cell *matHeaderCellDef> Codice Fiscale</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.cdFiscale}} </td>
          </ng-container>
          <ng-container matColumnDef="Partita Iva">
            <th mat-header-cell *matHeaderCellDef> Partita Iva</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.partitaIva}} </td>
          </ng-container>
          <ng-container matColumnDef="Stato Contratto">
            <th mat-header-cell *matHeaderCellDef> Stato Contratto</th>
            <td mat-cell *matCellDef="let element;index as i"> {{element.cdStatoContratto}} </td>
          </ng-container>
          <ng-container matColumnDef="view Contratto">
            <th mat-header-cell *matHeaderCellDef> Vedi Contratto</th>
            <td mat-cell *matCellDef="let element;index as i"><button class="btn"
                (click)="passContrattoStato(element?.cdStatoContratto, element?.cdContratto)">
              <mat-icon><span class="material-symbols-outlined">
                visibility
                </span></mat-icon>
              </button> </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator #paginator [pageSizeOptions]="paginator2.pageSizeOptions" [length]="paginator2?.totalElements"
          [pageSize]="paginator2?.size" (page)="onSubmit1($event)" (pageNext)="onSubmit1($event)" showFirstLastButtons>
        </mat-paginator>
      </div>


    </div>
  </div>
</div>
